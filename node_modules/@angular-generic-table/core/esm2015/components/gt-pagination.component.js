/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Component, Input } from '@angular/core';
import { GenericTableComponent } from './generic-table.component';
export class GtPaginationComponent {
    constructor() {
        this.ready = false;
    }
    /**
     * @return {?}
     */
    get genericTable() {
        return this._genericTable;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set genericTable(value) {
        if (value) {
            value.gtEvent.subscribe((res) => {
                if (res.name === 'gt-info' && res.value.pageTotal > 0) {
                    this.ready = true;
                }
            });
        }
        this._genericTable = value;
    }
}
GtPaginationComponent.decorators = [
    { type: Component, args: [{
                selector: 'gt-pagination',
                template: `<nav class="gt-pagination" aria-label="Table navigation" *ngIf="genericTable && genericTable.gtInfo && ready && genericTable.gtData?.length > 0" [ngClass]="{'no-data':genericTable.gtInfo.pageTotal === 0}">
  <ul class="pagination" [ngClass]="gtClasses">
    <li class="page-item" [ngClass]="{'disabled' : genericTable.gtInfo.pageCurrent === 1 || genericTable.loading }"><a class="page-link" href="javascript:void(0);" (click)="genericTable.gtInfo.pageCurrent > 1 && genericTable.previousPage()" [attr.aria-label]="genericTable.gtTexts.paginatePrevious"><span aria-hidden="true">&laquo;</span><span class="sr-only">{{genericTable.gtTexts.paginatePrevious}}</span></a></li>
    <li class="page-item" [ngClass]="{'disabled' : genericTable.loading && genericTable.gtInfo.pageCurrent !== page, 'active' : genericTable.gtInfo.pageCurrent === page }" *ngFor="let page of genericTable.gtInfo.pageTotal | gtPaginationPipe:genericTable.gtInfo.pageCurrent"><a class="page-link" [tabindex]="page === true ? -1:0" href="javascript:void(0);" (click)="page === true ? '':genericTable.goToPage(page)">{{page === true ? '&hellip;':page}}</a></li>
    <li class="page-item" [ngClass]="{'disabled' : genericTable.gtInfo.pageCurrent === genericTable.gtInfo.pageTotal || genericTable.loading }"><a class="page-link gt-link" href="javascript:void(0);" (click)="genericTable.gtInfo.pageCurrent !== genericTable.gtInfo.pageTotal && genericTable.nextPage()" [attr.aria-label]="genericTable.gtTexts.paginateNext"><span aria-hidden="true">&raquo;</span><span class="sr-only">{{genericTable.gtTexts.paginateNext}}</span></a></li>
  </ul>
  </nav>
    `,
                styles: ['.gt-link {cursor: pointer;}']
            },] },
];
/** @nocollapse */
GtPaginationComponent.propDecorators = {
    "genericTable": [{ type: Input },],
    "gtClasses": [{ type: Input },],
};
function GtPaginationComponent_tsickle_Closure_declarations() {
    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */
    GtPaginationComponent.decorators;
    /**
     * @nocollapse
     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}
     */
    GtPaginationComponent.ctorParameters;
    /** @type {!Object<string,!Array<{type: !Function, args: (undefined|!Array<?>)}>>} */
    GtPaginationComponent.propDecorators;
    /** @type {?} */
    GtPaginationComponent.prototype._genericTable;
    /** @type {?} */
    GtPaginationComponent.prototype.gtClasses;
    /** @type {?} */
    GtPaginationComponent.prototype.ready;
}
import { Pipe } from '@angular/core';
export class PaginationPipe {
    /**
     * @param {?} totalPages
     * @param {?} currentPage
     * @return {?}
     */
    transform(totalPages, currentPage) {
        if (totalPages === 0) {
            return [1];
        }
        const /** @type {?} */ pagination = []; // create new empty array for pagination
        const /** @type {?} */ siblings = 2; // sibling elements ie. number of elements on each side of current page
        const /** @type {?} */ paginationLength = totalPages < siblings * 2 + 1 ? totalPages : siblings * 2 + 1; // number of elements in pagination array
        const /** @type {?} */ start = currentPage <= siblings ? 1 : currentPage - siblings; // starting position for array
        const /** @type {?} */ modifier = totalPages - (currentPage + siblings) <= 0
            ? totalPages - (currentPage + siblings)
            : 0; // modifier for pagination values
        const /** @type {?} */ modifiedPosition = start + modifier <= 0 ? 1 : start + modifier;
        // push pages to pagination array
        for (let /** @type {?} */ i = 0; i < paginationLength; i++) {
            pagination.push(modifiedPosition + i);
        }
        // if first page is not included in pagination...
        if (pagination.indexOf(1) === -1) {
            // ...check if second page is in pagination...
            if (pagination.indexOf(2) === -1) {
                // ...if not check if total number of pages equals seven and number of siblings are two...
                if (totalPages === 7 && siblings === 2) {
                    // ...add second page and don't convert page number to ellipsis
                    pagination.unshift(2);
                }
                else {
                    // ...if not, use this placeholder for ellipsis instead of actual page number
                    pagination[0] = true;
                }
            }
            // ...add first page as first array item
            pagination.unshift(1);
        }
        else if (totalPages > paginationLength) {
            // if first page is included add extra page to keep number of items consistent
            pagination.splice(paginationLength, 0, paginationLength + 1);
        }
        // check if last page is included in pagination...
        if (pagination.indexOf(totalPages) === -1) {
            // ...if not, page next to last should either show ellipsis or actual page number for the page
            pagination[pagination.length - 1] =
                pagination[pagination.length - 1] === totalPages - 1
                    ? totalPages - 1
                    : true;
            // ...add last page to pagination
            pagination.push(totalPages);
        }
        return pagination;
    }
}
PaginationPipe.decorators = [
    { type: Pipe, args: [{
                name: 'gtPaginationPipe'
            },] },
];
function PaginationPipe_tsickle_Closure_declarations() {
    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */
    PaginationPipe.decorators;
    /**
     * @nocollapse
     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}
     */
    PaginationPipe.ctorParameters;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3QtcGFnaW5hdGlvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYW5ndWxhci1nZW5lcmljLXRhYmxlL2NvcmUvIiwic291cmNlcyI6WyJjb21wb25lbnRzL2d0LXBhZ2luYXRpb24uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNqRCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQWNsRSxNQUFNOztxQkFtQlUsS0FBSzs7Ozs7SUFsQnBCLElBQUksWUFBWTtRQUNmLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztLQUMxQjs7Ozs7UUFHRyxZQUFZLENBQUMsS0FBc0M7UUFDdEQsSUFBSSxLQUFLLEVBQUU7WUFDVixLQUFLLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQVEsRUFBRSxFQUFFO2dCQUNwQyxJQUFJLEdBQUcsQ0FBQyxJQUFJLEtBQUssU0FBUyxJQUFJLEdBQUcsQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLENBQUMsRUFBRTtvQkFDdEQsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7aUJBQ2xCO2FBQ0QsQ0FBQyxDQUFDO1NBQ0g7UUFDRCxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQzs7OztZQTFCNUIsU0FBUyxTQUFDO2dCQUNWLFFBQVEsRUFBRSxlQUFlO2dCQUN6QixRQUFRLEVBQUU7Ozs7Ozs7S0FPTjtnQkFDSixNQUFNLEVBQUUsQ0FBQyw2QkFBNkIsQ0FBQzthQUN2Qzs7Ozs2QkFNQyxLQUFLOzBCQWFMLEtBQUs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHUCxPQUFPLEVBQUUsSUFBSSxFQUFpQixNQUFNLGVBQWUsQ0FBQztBQUtwRCxNQUFNOzs7Ozs7SUFDTCxTQUFTLENBQUMsVUFBa0IsRUFBRSxXQUFtQjtRQUNoRCxJQUFJLFVBQVUsS0FBSyxDQUFDLEVBQUU7WUFDckIsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ1g7UUFDRCx1QkFBTSxVQUFVLEdBQWUsRUFBRSxDQUFDO1FBQ2xDLHVCQUFNLFFBQVEsR0FBRyxDQUFDLENBQUM7UUFDbkIsdUJBQU0sZ0JBQWdCLEdBQ3JCLFVBQVUsR0FBRyxRQUFRLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMvRCx1QkFBTSxLQUFLLEdBQUcsV0FBVyxJQUFJLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDO1FBQ25FLHVCQUFNLFFBQVEsR0FDYixVQUFVLEdBQUcsQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQztZQUN6QyxDQUFDLENBQUMsVUFBVSxHQUFHLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQztZQUN2QyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ04sdUJBQU0sZ0JBQWdCLEdBQUcsS0FBSyxHQUFHLFFBQVEsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQzs7UUFHdEUsS0FBSyxxQkFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxnQkFBZ0IsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUMxQyxVQUFVLENBQUMsSUFBSSxDQUFDLGdCQUFnQixHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQ3RDOztRQUdELElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTs7WUFFakMsSUFBSSxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFOztnQkFFakMsSUFBSSxVQUFVLEtBQUssQ0FBQyxJQUFJLFFBQVEsS0FBSyxDQUFDLEVBQUU7O29CQUV2QyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUN0QjtxQkFBTTs7b0JBRU4sVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztpQkFDckI7YUFDRDs7WUFFRCxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3RCO2FBQU0sSUFBSSxVQUFVLEdBQUcsZ0JBQWdCLEVBQUU7O1lBRXpDLFVBQVUsQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxFQUFFLGdCQUFnQixHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQzdEOztRQUVELElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTs7WUFFMUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2dCQUNoQyxVQUFVLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsS0FBSyxVQUFVLEdBQUcsQ0FBQztvQkFDbkQsQ0FBQyxDQUFDLFVBQVUsR0FBRyxDQUFDO29CQUNoQixDQUFDLENBQUMsSUFBSSxDQUFDOztZQUdULFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7U0FDNUI7UUFFRCxPQUFPLFVBQVUsQ0FBQztLQUNsQjs7O1lBeERELElBQUksU0FBQztnQkFDTCxJQUFJLEVBQUUsa0JBQWtCO2FBQ3hCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBHZW5lcmljVGFibGVDb21wb25lbnQgfSBmcm9tICcuL2dlbmVyaWMtdGFibGUuY29tcG9uZW50JztcclxuXHJcbkBDb21wb25lbnQoe1xyXG5cdHNlbGVjdG9yOiAnZ3QtcGFnaW5hdGlvbicsXHJcblx0dGVtcGxhdGU6IGA8bmF2IGNsYXNzPVwiZ3QtcGFnaW5hdGlvblwiIGFyaWEtbGFiZWw9XCJUYWJsZSBuYXZpZ2F0aW9uXCIgKm5nSWY9XCJnZW5lcmljVGFibGUgJiYgZ2VuZXJpY1RhYmxlLmd0SW5mbyAmJiByZWFkeSAmJiBnZW5lcmljVGFibGUuZ3REYXRhPy5sZW5ndGggPiAwXCIgW25nQ2xhc3NdPVwieyduby1kYXRhJzpnZW5lcmljVGFibGUuZ3RJbmZvLnBhZ2VUb3RhbCA9PT0gMH1cIj5cclxuICA8dWwgY2xhc3M9XCJwYWdpbmF0aW9uXCIgW25nQ2xhc3NdPVwiZ3RDbGFzc2VzXCI+XHJcbiAgICA8bGkgY2xhc3M9XCJwYWdlLWl0ZW1cIiBbbmdDbGFzc109XCJ7J2Rpc2FibGVkJyA6IGdlbmVyaWNUYWJsZS5ndEluZm8ucGFnZUN1cnJlbnQgPT09IDEgfHwgZ2VuZXJpY1RhYmxlLmxvYWRpbmcgfVwiPjxhIGNsYXNzPVwicGFnZS1saW5rXCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiAoY2xpY2spPVwiZ2VuZXJpY1RhYmxlLmd0SW5mby5wYWdlQ3VycmVudCA+IDEgJiYgZ2VuZXJpY1RhYmxlLnByZXZpb3VzUGFnZSgpXCIgW2F0dHIuYXJpYS1sYWJlbF09XCJnZW5lcmljVGFibGUuZ3RUZXh0cy5wYWdpbmF0ZVByZXZpb3VzXCI+PHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JmxhcXVvOzwvc3Bhbj48c3BhbiBjbGFzcz1cInNyLW9ubHlcIj57e2dlbmVyaWNUYWJsZS5ndFRleHRzLnBhZ2luYXRlUHJldmlvdXN9fTwvc3Bhbj48L2E+PC9saT5cclxuICAgIDxsaSBjbGFzcz1cInBhZ2UtaXRlbVwiIFtuZ0NsYXNzXT1cInsnZGlzYWJsZWQnIDogZ2VuZXJpY1RhYmxlLmxvYWRpbmcgJiYgZ2VuZXJpY1RhYmxlLmd0SW5mby5wYWdlQ3VycmVudCAhPT0gcGFnZSwgJ2FjdGl2ZScgOiBnZW5lcmljVGFibGUuZ3RJbmZvLnBhZ2VDdXJyZW50ID09PSBwYWdlIH1cIiAqbmdGb3I9XCJsZXQgcGFnZSBvZiBnZW5lcmljVGFibGUuZ3RJbmZvLnBhZ2VUb3RhbCB8IGd0UGFnaW5hdGlvblBpcGU6Z2VuZXJpY1RhYmxlLmd0SW5mby5wYWdlQ3VycmVudFwiPjxhIGNsYXNzPVwicGFnZS1saW5rXCIgW3RhYmluZGV4XT1cInBhZ2UgPT09IHRydWUgPyAtMTowXCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiAoY2xpY2spPVwicGFnZSA9PT0gdHJ1ZSA/ICcnOmdlbmVyaWNUYWJsZS5nb1RvUGFnZShwYWdlKVwiPnt7cGFnZSA9PT0gdHJ1ZSA/ICcmaGVsbGlwOyc6cGFnZX19PC9hPjwvbGk+XHJcbiAgICA8bGkgY2xhc3M9XCJwYWdlLWl0ZW1cIiBbbmdDbGFzc109XCJ7J2Rpc2FibGVkJyA6IGdlbmVyaWNUYWJsZS5ndEluZm8ucGFnZUN1cnJlbnQgPT09IGdlbmVyaWNUYWJsZS5ndEluZm8ucGFnZVRvdGFsIHx8IGdlbmVyaWNUYWJsZS5sb2FkaW5nIH1cIj48YSBjbGFzcz1cInBhZ2UtbGluayBndC1saW5rXCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiAoY2xpY2spPVwiZ2VuZXJpY1RhYmxlLmd0SW5mby5wYWdlQ3VycmVudCAhPT0gZ2VuZXJpY1RhYmxlLmd0SW5mby5wYWdlVG90YWwgJiYgZ2VuZXJpY1RhYmxlLm5leHRQYWdlKClcIiBbYXR0ci5hcmlhLWxhYmVsXT1cImdlbmVyaWNUYWJsZS5ndFRleHRzLnBhZ2luYXRlTmV4dFwiPjxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZyYXF1bzs8L3NwYW4+PHNwYW4gY2xhc3M9XCJzci1vbmx5XCI+e3tnZW5lcmljVGFibGUuZ3RUZXh0cy5wYWdpbmF0ZU5leHR9fTwvc3Bhbj48L2E+PC9saT5cclxuICA8L3VsPlxyXG4gIDwvbmF2PlxyXG4gICAgYCxcclxuXHRzdHlsZXM6IFsnLmd0LWxpbmsge2N1cnNvcjogcG9pbnRlcjt9J11cclxufSlcclxuZXhwb3J0IGNsYXNzIEd0UGFnaW5hdGlvbkNvbXBvbmVudCB7XHJcblx0Z2V0IGdlbmVyaWNUYWJsZSgpOiBHZW5lcmljVGFibGVDb21wb25lbnQ8YW55LCBhbnk+IHtcclxuXHRcdHJldHVybiB0aGlzLl9nZW5lcmljVGFibGU7XHJcblx0fVxyXG5cclxuXHRASW5wdXQoKVxyXG5cdHNldCBnZW5lcmljVGFibGUodmFsdWU6IEdlbmVyaWNUYWJsZUNvbXBvbmVudDxhbnksIGFueT4pIHtcclxuXHRcdGlmICh2YWx1ZSkge1xyXG5cdFx0XHR2YWx1ZS5ndEV2ZW50LnN1YnNjcmliZSgocmVzOiBhbnkpID0+IHtcclxuXHRcdFx0XHRpZiAocmVzLm5hbWUgPT09ICdndC1pbmZvJyAmJiByZXMudmFsdWUucGFnZVRvdGFsID4gMCkge1xyXG5cdFx0XHRcdFx0dGhpcy5yZWFkeSA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX2dlbmVyaWNUYWJsZSA9IHZhbHVlO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBfZ2VuZXJpY1RhYmxlOiBHZW5lcmljVGFibGVDb21wb25lbnQ8YW55LCBhbnk+O1xyXG5cdEBJbnB1dCgpIGd0Q2xhc3Nlczogc3RyaW5nO1xyXG5cdHB1YmxpYyByZWFkeSA9IGZhbHNlO1xyXG59XHJcbmltcG9ydCB7IFBpcGUsIFBpcGVUcmFuc2Zvcm0gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbkBQaXBlKHtcclxuXHRuYW1lOiAnZ3RQYWdpbmF0aW9uUGlwZSdcclxufSlcclxuZXhwb3J0IGNsYXNzIFBhZ2luYXRpb25QaXBlIGltcGxlbWVudHMgUGlwZVRyYW5zZm9ybSB7XHJcblx0dHJhbnNmb3JtKHRvdGFsUGFnZXM6IG51bWJlciwgY3VycmVudFBhZ2U6IG51bWJlcik6IEFycmF5PGFueT4ge1xyXG5cdFx0aWYgKHRvdGFsUGFnZXMgPT09IDApIHtcclxuXHRcdFx0cmV0dXJuIFsxXTtcclxuXHRcdH1cclxuXHRcdGNvbnN0IHBhZ2luYXRpb246IEFycmF5PGFueT4gPSBbXTsgLy8gY3JlYXRlIG5ldyBlbXB0eSBhcnJheSBmb3IgcGFnaW5hdGlvblxyXG5cdFx0Y29uc3Qgc2libGluZ3MgPSAyOyAvLyBzaWJsaW5nIGVsZW1lbnRzIGllLiBudW1iZXIgb2YgZWxlbWVudHMgb24gZWFjaCBzaWRlIG9mIGN1cnJlbnQgcGFnZVxyXG5cdFx0Y29uc3QgcGFnaW5hdGlvbkxlbmd0aCA9XHJcblx0XHRcdHRvdGFsUGFnZXMgPCBzaWJsaW5ncyAqIDIgKyAxID8gdG90YWxQYWdlcyA6IHNpYmxpbmdzICogMiArIDE7IC8vIG51bWJlciBvZiBlbGVtZW50cyBpbiBwYWdpbmF0aW9uIGFycmF5XHJcblx0XHRjb25zdCBzdGFydCA9IGN1cnJlbnRQYWdlIDw9IHNpYmxpbmdzID8gMSA6IGN1cnJlbnRQYWdlIC0gc2libGluZ3M7IC8vIHN0YXJ0aW5nIHBvc2l0aW9uIGZvciBhcnJheVxyXG5cdFx0Y29uc3QgbW9kaWZpZXIgPVxyXG5cdFx0XHR0b3RhbFBhZ2VzIC0gKGN1cnJlbnRQYWdlICsgc2libGluZ3MpIDw9IDBcclxuXHRcdFx0XHQ/IHRvdGFsUGFnZXMgLSAoY3VycmVudFBhZ2UgKyBzaWJsaW5ncylcclxuXHRcdFx0XHQ6IDA7IC8vIG1vZGlmaWVyIGZvciBwYWdpbmF0aW9uIHZhbHVlc1xyXG5cdFx0Y29uc3QgbW9kaWZpZWRQb3NpdGlvbiA9IHN0YXJ0ICsgbW9kaWZpZXIgPD0gMCA/IDEgOiBzdGFydCArIG1vZGlmaWVyO1xyXG5cclxuXHRcdC8vIHB1c2ggcGFnZXMgdG8gcGFnaW5hdGlvbiBhcnJheVxyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBwYWdpbmF0aW9uTGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0cGFnaW5hdGlvbi5wdXNoKG1vZGlmaWVkUG9zaXRpb24gKyBpKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBpZiBmaXJzdCBwYWdlIGlzIG5vdCBpbmNsdWRlZCBpbiBwYWdpbmF0aW9uLi4uXHJcblx0XHRpZiAocGFnaW5hdGlvbi5pbmRleE9mKDEpID09PSAtMSkge1xyXG5cdFx0XHQvLyAuLi5jaGVjayBpZiBzZWNvbmQgcGFnZSBpcyBpbiBwYWdpbmF0aW9uLi4uXHJcblx0XHRcdGlmIChwYWdpbmF0aW9uLmluZGV4T2YoMikgPT09IC0xKSB7XHJcblx0XHRcdFx0Ly8gLi4uaWYgbm90IGNoZWNrIGlmIHRvdGFsIG51bWJlciBvZiBwYWdlcyBlcXVhbHMgc2V2ZW4gYW5kIG51bWJlciBvZiBzaWJsaW5ncyBhcmUgdHdvLi4uXHJcblx0XHRcdFx0aWYgKHRvdGFsUGFnZXMgPT09IDcgJiYgc2libGluZ3MgPT09IDIpIHtcclxuXHRcdFx0XHRcdC8vIC4uLmFkZCBzZWNvbmQgcGFnZSBhbmQgZG9uJ3QgY29udmVydCBwYWdlIG51bWJlciB0byBlbGxpcHNpc1xyXG5cdFx0XHRcdFx0cGFnaW5hdGlvbi51bnNoaWZ0KDIpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvLyAuLi5pZiBub3QsIHVzZSB0aGlzIHBsYWNlaG9sZGVyIGZvciBlbGxpcHNpcyBpbnN0ZWFkIG9mIGFjdHVhbCBwYWdlIG51bWJlclxyXG5cdFx0XHRcdFx0cGFnaW5hdGlvblswXSA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdC8vIC4uLmFkZCBmaXJzdCBwYWdlIGFzIGZpcnN0IGFycmF5IGl0ZW1cclxuXHRcdFx0cGFnaW5hdGlvbi51bnNoaWZ0KDEpO1xyXG5cdFx0fSBlbHNlIGlmICh0b3RhbFBhZ2VzID4gcGFnaW5hdGlvbkxlbmd0aCkge1xyXG5cdFx0XHQvLyBpZiBmaXJzdCBwYWdlIGlzIGluY2x1ZGVkIGFkZCBleHRyYSBwYWdlIHRvIGtlZXAgbnVtYmVyIG9mIGl0ZW1zIGNvbnNpc3RlbnRcclxuXHRcdFx0cGFnaW5hdGlvbi5zcGxpY2UocGFnaW5hdGlvbkxlbmd0aCwgMCwgcGFnaW5hdGlvbkxlbmd0aCArIDEpO1xyXG5cdFx0fVxyXG5cdFx0Ly8gY2hlY2sgaWYgbGFzdCBwYWdlIGlzIGluY2x1ZGVkIGluIHBhZ2luYXRpb24uLi5cclxuXHRcdGlmIChwYWdpbmF0aW9uLmluZGV4T2YodG90YWxQYWdlcykgPT09IC0xKSB7XHJcblx0XHRcdC8vIC4uLmlmIG5vdCwgcGFnZSBuZXh0IHRvIGxhc3Qgc2hvdWxkIGVpdGhlciBzaG93IGVsbGlwc2lzIG9yIGFjdHVhbCBwYWdlIG51bWJlciBmb3IgdGhlIHBhZ2VcclxuXHRcdFx0cGFnaW5hdGlvbltwYWdpbmF0aW9uLmxlbmd0aCAtIDFdID1cclxuXHRcdFx0XHRwYWdpbmF0aW9uW3BhZ2luYXRpb24ubGVuZ3RoIC0gMV0gPT09IHRvdGFsUGFnZXMgLSAxXHJcblx0XHRcdFx0XHQ/IHRvdGFsUGFnZXMgLSAxXHJcblx0XHRcdFx0XHQ6IHRydWU7XHJcblxyXG5cdFx0XHQvLyAuLi5hZGQgbGFzdCBwYWdlIHRvIHBhZ2luYXRpb25cclxuXHRcdFx0cGFnaW5hdGlvbi5wdXNoKHRvdGFsUGFnZXMpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBwYWdpbmF0aW9uO1xyXG5cdH1cclxufVxyXG4iXX0=