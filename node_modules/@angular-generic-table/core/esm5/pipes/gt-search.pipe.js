/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Pipe } from '@angular/core';
// unsupported: template constraints.
/**
 * @template R
 */
var GtSearchPipe = /** @class */ (function () {
    function GtSearchPipe() {
        /**
         * Return property
         */
        this.getProperty = function (array, key) {
            for (var /** @type {?} */ i = 0; i < array.length; i++) {
                if (array[i].objectKey === key) {
                    return array[i];
                }
            }
        };
    }
    /**
     * @param {?} allRows
     * @param {?} searchTerms
     * @param {?} gtInfo
     * @param {?} settings
     * @param {?} fields
     * @param {?} refreshData
     * @return {?}
     */
    GtSearchPipe.prototype.transform = /**
     * @param {?} allRows
     * @param {?} searchTerms
     * @param {?} gtInfo
     * @param {?} settings
     * @param {?} fields
     * @param {?} refreshData
     * @return {?}
     */
    function (allRows, searchTerms, gtInfo, settings, fields, refreshData) {
        //  if no search terms are defined...
        if (!searchTerms || searchTerms.replace(/"/g, '').length === 0) {
            // ...return all rows
            var /** @type {?} */ length_1 = allRows === null ? 0 : allRows.length;
            gtInfo.recordsAfterSearch = length_1;
            return allRows;
        }
        var /** @type {?} */ searchFunction = {};
        var /** @type {?} */ fieldsTemp = [];
        for (var /** @type {?} */ k = 0; k < fields.length; k++) {
            var /** @type {?} */ field = fields[k];
            // check if field should be included in global search
            var /** @type {?} */ include = this.getProperty(settings, field.objectKey).search === false
                ? false
                : true;
            // if include...
            if (include) {
                // ...and if search function is defined...
                if (typeof field.search === 'function') {
                    // ...add it as search function for field
                    searchFunction[field.objectKey] = field.search;
                }
                // ...if no search function is defined but value function is defined...
                else if (typeof field.value === 'function') {
                    // ...add it as search function for field
                    searchFunction[field.objectKey] = field.value;
                }
                // ...push it to our fields array
                fieldsTemp.push(field);
            }
        }
        var /** @type {?} */ filteredRows = [];
        searchTerms = typeof searchTerms === 'undefined' ? '' : searchTerms;
        var /** @type {?} */ searchTermsArray = searchTerms.toLowerCase().match(/(".*"|[^\s]+)/g);
        for (var /** @type {?} */ i = 0; i < allRows.length; i++) {
            var /** @type {?} */ row = allRows[i];
            var /** @type {?} */ string = '';
            for (var /** @type {?} */ j = 0; j < fieldsTemp.length; j++) {
                var /** @type {?} */ separator = j === 0 ? '' : ' & ';
                string += searchFunction[fieldsTemp[j].objectKey]
                    ? separator + searchFunction[fieldsTemp[j].objectKey](row, j)
                    : separator + row[fieldsTemp[j].objectKey];
            }
            string = string.toLowerCase();
            var /** @type {?} */ match = true;
            for (var /** @type {?} */ k = 0; k < searchTermsArray.length; k++) {
                var /** @type {?} */ term = searchTermsArray[k].replace(/"/g, '');
                match = string.indexOf(term) !== -1;
                if (!match) {
                    break;
                }
            }
            if (match) {
                filteredRows.push(row);
            }
        }
        gtInfo.recordsAfterSearch = filteredRows.length;
        // gtInfo.refresh(filteredRows.length,gt);
        return filteredRows;
    };
    GtSearchPipe.decorators = [
        { type: Pipe, args: [{
                    name: 'gtSearch'
                },] },
    ];
    return GtSearchPipe;
}());
export { GtSearchPipe };
function GtSearchPipe_tsickle_Closure_declarations() {
    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */
    GtSearchPipe.decorators;
    /**
     * @nocollapse
     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}
     */
    GtSearchPipe.ctorParameters;
    /**
     * Return property
     * @type {?}
     */
    GtSearchPipe.prototype.getProperty;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3Qtc2VhcmNoLnBpcGUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYW5ndWxhci1nZW5lcmljLXRhYmxlL2NvcmUvIiwic291cmNlcyI6WyJwaXBlcy9ndC1zZWFyY2gucGlwZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLElBQUksRUFBaUIsTUFBTSxlQUFlLENBQUM7Ozs7Ozs7Ozs7MkJBVzdCLFVBQVMsS0FBaUIsRUFBRSxHQUFXO1lBQzVELEtBQUsscUJBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDdEMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxLQUFLLEdBQUcsRUFBRTtvQkFDL0IsT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7aUJBQ2hCO2FBQ0Q7U0FDRDs7Ozs7Ozs7Ozs7SUFFRCxnQ0FBUzs7Ozs7Ozs7O0lBQVQsVUFDQyxPQUFZLEVBQ1osV0FBbUIsRUFDbkIsTUFBcUIsRUFDckIsUUFBZ0MsRUFDaEMsTUFBb0MsRUFDcEMsV0FBbUI7O1FBR25CLElBQUksQ0FBQyxXQUFXLElBQUksV0FBVyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTs7WUFFL0QscUJBQU0sUUFBTSxHQUFHLE9BQU8sS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztZQUNyRCxNQUFNLENBQUMsa0JBQWtCLEdBQUcsUUFBTSxDQUFDO1lBQ25DLE9BQU8sT0FBTyxDQUFDO1NBQ2Y7UUFFRCxxQkFBTSxjQUFjLEdBQVEsRUFBRSxDQUFDO1FBQy9CLHFCQUFNLFVBQVUsR0FBZSxFQUFFLENBQUM7UUFFbEMsS0FBSyxxQkFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFB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QUFJLFNBQUM7b0JBQ0wsSUFBSSxFQUFFLFVBQVU7aUJBQ2hCOzt1QkFSRDs7U0FTYSxZQUFZIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGlwZSwgUGlwZVRyYW5zZm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBHdENvbmZpZ0ZpZWxkIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ndC1jb25maWctZmllbGQnO1xyXG5pbXBvcnQgeyBHdFJvdyB9IGZyb20gJy4uL2ludGVyZmFjZXMvZ3Qtcm93JztcclxuaW1wb3J0IHsgR3RDb25maWdTZXR0aW5nIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ndC1jb25maWctc2V0dGluZyc7XHJcbmltcG9ydCB7IEd0SW5mb3JtYXRpb24gfSBmcm9tICcuLi9pbnRlcmZhY2VzL2d0LWluZm9ybWF0aW9uJztcclxuXHJcbkBQaXBlKHtcclxuXHRuYW1lOiAnZ3RTZWFyY2gnXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBHdFNlYXJjaFBpcGU8UiBleHRlbmRzIEd0Um93PiBpbXBsZW1lbnRzIFBpcGVUcmFuc2Zvcm0ge1xyXG5cdC8qKiBSZXR1cm4gcHJvcGVydHkgKi9cclxuXHRwcml2YXRlIGdldFByb3BlcnR5ID0gZnVuY3Rpb24oYXJyYXk6IEFycmF5PGFueT4sIGtleTogc3RyaW5nKSB7XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGlmIChhcnJheVtpXS5vYmplY3RLZXkgPT09IGtleSkge1xyXG5cdFx0XHRcdHJldHVybiBhcnJheVtpXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdHRyYW5zZm9ybShcclxuXHRcdGFsbFJvd3M6IGFueSxcclxuXHRcdHNlYXJjaFRlcm1zOiBzdHJpbmcsXHJcblx0XHRndEluZm86IEd0SW5mb3JtYXRpb24sXHJcblx0XHRzZXR0aW5nczogQXJyYXk8R3RDb25maWdTZXR0aW5nPixcclxuXHRcdGZpZWxkczogQXJyYXk8R3RDb25maWdGaWVsZDxSLCBhbnk+PixcclxuXHRcdHJlZnJlc2hEYXRhOiBudW1iZXJcclxuXHQpOiBhbnkge1xyXG5cdFx0Ly8gIGlmIG5vIHNlYXJjaCB0ZXJtcyBhcmUgZGVmaW5lZC4uLlxyXG5cdFx0aWYgKCFzZWFyY2hUZXJtcyB8fCBzZWFyY2hUZXJtcy5yZXBsYWNlKC9cIi9nLCAnJykubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdC8vIC4uLnJldHVybiBhbGwgcm93c1xyXG5cdFx0XHRjb25zdCBsZW5ndGggPSBhbGxSb3dzID09PSBudWxsID8gMCA6IGFsbFJvd3MubGVuZ3RoO1xyXG5cdFx0XHRndEluZm8ucmVjb3Jkc0FmdGVyU2VhcmNoID0gbGVuZ3RoO1xyXG5cdFx0XHRyZXR1cm4gYWxsUm93cztcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBzZWFyY2hGdW5jdGlvbjogYW55ID0ge307XHJcblx0XHRjb25zdCBmaWVsZHNUZW1wOiBBcnJheTxhbnk+ID0gW107XHJcblxyXG5cdFx0Zm9yIChsZXQgayA9IDA7IGsgPCBmaWVsZHMubGVuZ3RoOyBrKyspIHtcclxuXHRcdFx0Y29uc3QgZmllbGQgPSBmaWVsZHNba107XHJcblxyXG5cdFx0XHQvLyBjaGVjayBpZiBmaWVsZCBzaG91bGQgYmUgaW5jbHVkZWQgaW4gZ2xvYmFsIHNlYXJjaFxyXG5cdFx0XHRjb25zdCBpbmNsdWRlID1cclxuXHRcdFx0XHR0aGlzLmdldFByb3BlcnR5KHNldHRpbmdzLCBmaWVsZC5vYmplY3RLZXkpLnNlYXJjaCA9PT0gZmFsc2VcclxuXHRcdFx0XHRcdD8gZmFsc2VcclxuXHRcdFx0XHRcdDogdHJ1ZTtcclxuXHJcblx0XHRcdC8vIGlmIGluY2x1ZGUuLi5cclxuXHRcdFx0aWYgKGluY2x1ZGUpIHtcclxuXHRcdFx0XHQvLyAuLi5hbmQgaWYgc2VhcmNoIGZ1bmN0aW9uIGlzIGRlZmluZWQuLi5cclxuXHRcdFx0XHRpZiAodHlwZW9mIGZpZWxkLnNlYXJjaCA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdFx0Ly8gLi4uYWRkIGl0IGFzIHNlYXJjaCBmdW5jdGlvbiBmb3IgZmllbGRcclxuXHRcdFx0XHRcdHNlYXJjaEZ1bmN0aW9uW2ZpZWxkLm9iamVjdEtleV0gPSBmaWVsZC5zZWFyY2g7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIC4uLmlmIG5vIHNlYXJjaCBmdW5jdGlvbiBpcyBkZWZpbmVkIGJ1dCB2YWx1ZSBmdW5jdGlvbiBpcyBkZWZpbmVkLi4uXHJcblx0XHRcdFx0ZWxzZSBpZiAodHlwZW9mIGZpZWxkLnZhbHVlID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0XHQvLyAuLi5hZGQgaXQgYXMgc2VhcmNoIGZ1bmN0aW9uIGZvciBmaWVsZFxyXG5cdFx0XHRcdFx0c2VhcmNoRnVuY3Rpb25bZmllbGQub2JqZWN0S2V5XSA9IGZpZWxkLnZhbHVlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gLi4ucHVzaCBpdCB0byBvdXIgZmllbGRzIGFycmF5XHJcblx0XHRcdFx0ZmllbGRzVGVtcC5wdXNoKGZpZWxkKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGZpbHRlcmVkUm93czogQXJyYXk8YW55PiA9IFtdO1xyXG5cdFx0c2VhcmNoVGVybXMgPSB0eXBlb2Ygc2VhcmNoVGVybXMgPT09ICd1bmRlZmluZWQnID8gJycgOiBzZWFyY2hUZXJtcztcclxuXHRcdGNvbnN0IHNlYXJjaFRlcm1zQXJyYXkgPSBzZWFyY2hUZXJtcy50b0xvd2VyQ2FzZSgpLm1hdGNoKC8oXCIuKlwifFteXFxzXSspL2cpO1xyXG5cclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgYWxsUm93cy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjb25zdCByb3cgPSBhbGxSb3dzW2ldO1xyXG5cdFx0XHRsZXQgc3RyaW5nID0gJyc7XHJcblxyXG5cdFx0XHRmb3IgKGxldCBqID0gMDsgaiA8IGZpZWxkc1RlbXAubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRjb25zdCBzZXBhcmF0b3IgPSBqID09PSAwID8gJycgOiAnICYgJztcclxuXHRcdFx0XHRzdHJpbmcgKz0gc2VhcmNoRnVuY3Rpb25bZmllbGRzVGVtcFtqXS5vYmplY3RLZXldXHJcblx0XHRcdFx0XHQ/IHNlcGFyYXRvciArIHNlYXJjaEZ1bmN0aW9uW2ZpZWxkc1RlbXBbal0ub2JqZWN0S2V5XShyb3csIGopXHJcblx0XHRcdFx0XHQ6IHNlcGFyYXRvciArIHJvd1tmaWVsZHNUZW1wW2pdLm9iamVjdEtleV07XHJcblx0XHRcdH1cclxuXHRcdFx0c3RyaW5nID0gc3RyaW5nLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdGxldCBtYXRjaDogQm9vbGVhbiA9IHRydWU7XHJcblxyXG5cdFx0XHRmb3IgKGxldCBrID0gMDsgayA8IHNlYXJjaFRlcm1zQXJyYXkubGVuZ3RoOyBrKyspIHtcclxuXHRcdFx0XHRjb25zdCB0ZXJtID0gc2VhcmNoVGVybXNBcnJheVtrXS5yZXBsYWNlKC9cIi9nLCAnJyk7XHJcblx0XHRcdFx0bWF0Y2ggPSBzdHJpbmcuaW5kZXhPZih0ZXJtKSAhPT0gLTE7XHJcblxyXG5cdFx0XHRcdGlmICghbWF0Y2gpIHtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAobWF0Y2gpIHtcclxuXHRcdFx0XHRmaWx0ZXJlZFJvd3MucHVzaChyb3cpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRndEluZm8ucmVjb3Jkc0FmdGVyU2VhcmNoID0gZmlsdGVyZWRSb3dzLmxlbmd0aDtcclxuXHRcdC8vIGd0SW5mby5yZWZyZXNoKGZpbHRlcmVkUm93cy5sZW5ndGgsZ3QpO1xyXG5cdFx0cmV0dXJuIGZpbHRlcmVkUm93cztcclxuXHR9XHJcbn1cclxuIl19